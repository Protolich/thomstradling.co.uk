Ext.ns('Ext.ux.form');Ext.ux.form.DateTime=Ext.extend(Ext.form.Field,{dateValidator:null,defaultAutoCreate:{tag:'input',type:'hidden'},dtSeparator:' ',hiddenFormat:'Y-m-d H:i:s',otherToNow:true,timePosition:'right',timeValidator:null,timeWidth:100,dateFormat:'m/d/y',timeFormat:'g:i A',maxDateValue:'',minDateValue:'',timeIncrement:15,maxTimeValue:null,minTimeValue:null,disabledDates:null,initComponent:function(){Ext.ux.form.DateTime.superclass.initComponent.call(this);if(!this.hasOwnProperty('offset_time')||isNaN(this.offset_time)){this.offset_time=0;}
var dateConfig=Ext.apply({},{id:this.id+'-date',format:this.dateFormat||Ext.form.DateField.prototype.format,width:this.timeWidth,selectOnFocus:this.selectOnFocus,validator:this.dateValidator,disabledDates:this.disabledDates||null,disabledDays:this.disabledDays||[],showToday:this.showToday||true,maxValue:this.maxDateValue||'',minValue:this.minDateValue||'',startDay:this.startDay||0,listeners:{blur:{scope:this,fn:this.onBlur},focus:{scope:this,fn:this.onFocus}}},this.dateConfig);this.df=new Ext.form.DateField(dateConfig);this.df.ownerCt=this;delete(this.dateFormat);delete(this.disabledDates);delete(this.disabledDays);delete(this.maxDateValue);delete(this.minDateValue);delete(this.startDay);var timeConfig=Ext.apply({},{id:this.id+'-time',format:this.timeFormat||Ext.form.TimeField.prototype.format,width:this.timeWidth,selectOnFocus:this.selectOnFocus,validator:this.timeValidator,increment:this.timeIncrement||15,maxValue:this.maxTimeValue||null,minValue:this.minTimeValue||null,listeners:{blur:{scope:this,fn:this.onBlur},focus:{scope:this,fn:this.onFocus}}},this.timeConfig);this.tf=new Ext.form.TimeField(timeConfig);this.tf.ownerCt=this;delete(this.timeFormat);delete(this.maxTimeValue);delete(this.minTimeValue);delete(this.timeIncrement);this.relayEvents(this.df,['focus','specialkey','invalid','valid']);this.relayEvents(this.tf,['focus','specialkey','invalid','valid']);this.on('specialkey',this.onSpecialKey,this);},onRender:function(ct,position){if(this.isRendered){return;}
Ext.ux.form.DateTime.superclass.onRender.call(this,ct,position);var t;if('below'===this.timePosition||'bellow'===this.timePosition){t=Ext.DomHelper.append(ct,{tag:'table',style:'border-collapse:collapse',children:[{tag:'tr',children:[{tag:'td',style:'padding-bottom:1px',cls:'ux-datetime-date'}]},{tag:'tr',children:[{tag:'td',cls:'ux-datetime-time'}]}]},true);}
else{t=Ext.DomHelper.append(ct,{tag:'table',style:'border-collapse:collapse',children:[{tag:'tr',children:[{tag:'td',style:'padding-right:4px',cls:'ux-datetime-date'},{tag:'td',cls:'ux-datetime-time'}]}]},true);}
this.tableEl=t;this.wrap=t.wrap({cls:'x-form-field-wrap x-datetime-wrap'});this.wrap.on("mousedown",this.onMouseDown,this,{delay:10});this.df.render(t.child('td.ux-datetime-date'));this.tf.render(t.child('td.ux-datetime-time'));this.df.el.swallowEvent(['keydown','keypress']);this.tf.el.swallowEvent(['keydown','keypress']);if('side'===this.msgTarget){var elp=this.el.findParent('.x-form-element',10,true);if(elp){this.errorIcon=elp.createChild({cls:'x-form-invalid-icon'});}
var o={errorIcon:this.errorIcon,msgTarget:'side',alignErrorIcon:this.alignErrorIcon.createDelegate(this)};Ext.apply(this.df,o);Ext.apply(this.tf,o);}
this.el.dom.name=this.hiddenName||this.name||this.id;this.df.el.dom.removeAttribute("name");this.tf.el.dom.removeAttribute("name");this.isRendered=true;this.updateHidden();},adjustSize:Ext.BoxComponent.prototype.adjustSize,alignErrorIcon:function(){this.errorIcon.alignTo(this.tableEl,'tl-tr',[2,0]);},initDateValue:function(){this.dateValue=this.otherToNow?new Date():new Date(1970,0,1,0,0,0);},clearInvalid:function(){this.df.clearInvalid();this.tf.clearInvalid();},markInvalid:function(msg){this.df.markInvalid(msg);this.tf.markInvalid(msg);},beforeDestroy:function(){if(this.isRendered){this.wrap.removeAllListeners();this.wrap.remove();this.tableEl.remove();this.df.destroy();this.tf.destroy();}},disable:function(){if(this.isRendered){this.df.disabled=this.disabled;this.df.onDisable();this.tf.onDisable();}
this.disabled=true;this.df.disabled=true;this.tf.disabled=true;this.fireEvent("disable",this);return this;},enable:function(){if(this.rendered){this.df.onEnable();this.tf.onEnable();}
this.disabled=false;this.df.disabled=false;this.tf.disabled=false;this.fireEvent("enable",this);return this;},focus:function(){this.df.focus();},getPositionEl:function(){return this.wrap;},getResizeEl:function(){return this.wrap;},getValue:function(){return this.dateValue?new Date(this.dateValue):'';},isValid:function(){return this.df.isValid()&&this.tf.isValid();},isVisible:function(){return this.df.rendered&&this.df.getActionEl().isVisible();},onBlur:function(f){if(this.wrapClick){f.focus();this.wrapClick=false;}
if(f===this.df){this.updateDate();}
else{this.updateTime();}
this.updateHidden();this.validate();(function(){if(!this.df.hasFocus&&!this.tf.hasFocus){var v=this.getValue();if(String(v)!==String(this.startValue)){this.fireEvent("change",this,v,this.startValue);}
this.hasFocus=false;this.fireEvent('blur',this);}}).defer(100,this);},onFocus:function(){if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.fireEvent("focus",this);}},onMouseDown:function(e){if(!this.disabled){this.wrapClick='td'===e.target.nodeName.toLowerCase();}},onSpecialKey:function(t,e){var key=e.getKey();if(key===e.TAB){if(t===this.df&&!e.shiftKey){e.stopEvent();this.tf.focus();}
if(t===this.tf&&e.shiftKey){e.stopEvent();this.df.focus();}
this.updateValue();}
if(key===e.ENTER){this.updateValue();}},reset:function(){this.df.setValue(this.originalValue);this.tf.setValue(this.originalValue);},setDate:function(date){if(date&&this.offset_time!=0){date=date.add(Date.MINUTE,60*new Number(this.offset_time));}
this.df.setValue(date);},setTime:function(date){if(date&&this.offset_time!=0){date=date.add(Date.MINUTE,60*new Number(this.offset_time));}
this.tf.setValue(date);},setSize:function(w,h){if(!w){return;}
if('below'===this.timePosition){this.df.setSize(w,h);this.tf.setSize(w,h);if(Ext.isIE){this.df.el.up('td').setWidth(w);this.tf.el.up('td').setWidth(w);}}
else{this.df.setSize(w-this.timeWidth-4,h);this.tf.setSize(this.timeWidth,h);if(Ext.isIE){this.df.el.up('td').setWidth(w-this.timeWidth-4);this.tf.el.up('td').setWidth(this.timeWidth);}}},setValue:function(val){if(!val&&true===this.emptyToNow){this.setValue(new Date());return;}
else if(!val){this.setDate('');this.setTime('');this.updateValue();return;}
if('number'===typeof val){val=new Date(val);}
else if('string'===typeof val&&this.hiddenFormat){val=Date.parseDate(val,this.hiddenFormat);}
val=val?val:new Date(1970,0,1,0,0,0);var da;if(val instanceof Date){this.setDate(val);this.setTime(val);this.dateValue=new Date(Ext.isIE?val.getTime():val);}
else{da=val.split(this.dtSeparator);this.setDate(da[0]);if(da[1]){if(da[2]){da[1]+=da[2];}
this.setTime(da[1]);}}
this.updateValue();},setVisible:function(visible){if(visible){this.df.show();this.tf.show();}else{this.df.hide();this.tf.hide();}
return this;},show:function(){return this.setVisible(true);},hide:function(){return this.setVisible(false);},updateDate:function(){var d=this.df.getValue();if(d){if(!(this.dateValue instanceof Date)){this.initDateValue();if(!this.tf.getValue()){this.setTime(this.dateValue);}}
this.dateValue.setMonth(0);this.dateValue.setFullYear(d.getFullYear());this.dateValue.setMonth(d.getMonth(),d.getDate());}
else{this.dateValue='';this.setTime('');}},updateTime:function(){var t=this.tf.getValue();if(t&&!(t instanceof Date)){t=Date.parseDate(t,this.tf.format);}
if(t&&!this.df.getValue()){this.initDateValue();this.setDate(this.dateValue);}
if(this.dateValue instanceof Date){if(t){this.dateValue.setHours(t.getHours());this.dateValue.setMinutes(t.getMinutes());this.dateValue.setSeconds(t.getSeconds());}
else{this.dateValue.setHours(0);this.dateValue.setMinutes(0);this.dateValue.setSeconds(0);}}},updateHidden:function(){if(this.isRendered){var value='';if(this.dateValue instanceof Date){value=this.dateValue.add(Date.MINUTE,0-60*new Number(this.offset_time)).format(this.hiddenFormat);}
this.el.dom.value=value;}},updateValue:function(){this.updateDate();this.updateTime();this.updateHidden();return;},validate:function(){return this.df.validate()&&this.tf.validate();},renderer:function(field){var format=field.editor.dateFormat||Ext.ux.form.DateTime.prototype.dateFormat;format+=' '+(field.editor.timeFormat||Ext.ux.form.DateTime.prototype.timeFormat);var renderer=function(val){var retval=Ext.util.Format.date(val,format);return retval;};return renderer;}});Ext.reg('xdatetime',Ext.ux.form.DateTime);;MODx.panel.ImageTV=function(config){config=config||{};config.filemanager_url=MODx.config.filemanager_url;Ext.applyIf(config,{layout:'form',autoHeight:true,border:false,hideLabels:true,defaults:{autoHeight:true,border:false},items:[{xtype:'hidden',name:'tv'+config.tv,id:'tv'+config.tv,value:config.value},{xtype:'modx-combo-browser',browserEl:'tvbrowser'+config.tv,name:'tvbrowser'+config.tv,id:'tvbrowser'+config.tv,triggerClass:'x-form-image-trigger',value:config.relativeValue,hideFiles:true,source:config.source||1,allowedFileTypes:config.allowedFileTypes||'',openTo:config.openTo||'',hideSourceCombo:true,listeners:{'select':{fn:function(data){Ext.getCmp('tv'+this.config.tv).setValue(data.relativeUrl);Ext.getCmp('tvbrowser'+this.config.tv).setValue(data.relativeUrl);this.fireEvent('select',data);},scope:this},'change':{fn:function(cb,nv){Ext.getCmp('tv'+this.config.tv).setValue(nv);this.fireEvent('select',{relativeUrl:nv,url:nv});},scope:this}}}]});MODx.panel.ImageTV.superclass.constructor.call(this,config);this.addEvents({select:true});};Ext.extend(MODx.panel.ImageTV,MODx.Panel);Ext.reg('modx-panel-tv-image',MODx.panel.ImageTV);MODx.panel.FileTV=function(config){config=config||{};config.filemanager_url=MODx.config.filemanager_url;Ext.applyIf(config,{layout:'form',autoHeight:true,border:false,hideLabels:true,defaults:{autoHeight:true,border:false},items:[{xtype:'hidden',name:'tv'+config.tv,id:'tv'+config.tv,value:config.value},{xtype:'modx-combo-browser',browserEl:'tvbrowser'+config.tv,name:'tvbrowser'+config.tv,id:'tvbrowser'+config.tv,value:config.relativeValue,hideFiles:true,source:config.source||1,allowedFileTypes:config.allowedFileTypes||'',wctx:config.wctx||'web',openTo:config.openTo||'',hideSourceCombo:true,listeners:{'select':{fn:function(data){Ext.getCmp('tv'+this.config.tv).setValue(data.relativeUrl);Ext.getCmp('tvbrowser'+this.config.tv).setValue(data.relativeUrl);this.fireEvent('select',data);},scope:this},'change':{fn:function(cb,nv){Ext.getCmp('tv'+this.config.tv).setValue(nv);this.fireEvent('select',{relativeUrl:nv,url:nv});},scope:this}}}]});MODx.panel.FileTV.superclass.constructor.call(this,config);this.addEvents({select:true});};Ext.extend(MODx.panel.FileTV,MODx.Panel);Ext.reg('modx-panel-tv-file',MODx.panel.FileTV);MODx.checkTV=function(id){var cb=Ext.get('tv'+id);Ext.get('tvh'+id).dom.value=cb.dom.checked?cb.dom.value:'';};;MODx.grid.ResourceSecurity=function(config){config=config||{};var ac=new Ext.ux.grid.CheckColumn({header:_('access'),dataIndex:'access',width:40,sortable:false,hidden:MODx.perm.resourcegroup_resource_edit!=1});var qs=Ext.urlDecode(window.location.search.substring(1));Ext.applyIf(config,{id:'modx-grid-resource-security',url:MODx.config.connector_url,baseParams:{action:'resource/resourcegroup/getList',resource:config.resource,"parent":config["parent"],mode:config.mode||'update',"token":qs.reload||''},saveParams:{resource:config.resource},fields:['id','name','access'],paging:true,remoteSort:true,plugins:ac,columns:[{header:_('name'),dataIndex:'name',width:200,sortable:true},ac]});MODx.grid.ResourceSecurity.superclass.constructor.call(this,config);this.on('rowclick',MODx.fireResourceFormChange);};Ext.extend(MODx.grid.ResourceSecurity,MODx.grid.Grid);Ext.reg('modx-grid-resource-security',MODx.grid.ResourceSecurity);;MODx.panel.ResourceTV=function(config){config=config||{};Ext.applyIf(config,{id:'modx-panel-resource-tv',title:_('template_variables'),class_key:'',resource:'',cls:MODx.config.tvs_below_content==1?'x-panel-body tvs-wrapper below-content':'tvs-wrapper x-panel-body',autoHeight:true,applyTo:'modx-resource-tvs-div',header:false,templateField:'modx-resource-template'});MODx.panel.ResourceTV.superclass.constructor.call(this,config);this.addEvents({load:true});};Ext.extend(MODx.panel.ResourceTV,MODx.Panel,{autoload:function(){return false;},refreshTVs:function(){return false;var t=Ext.getCmp(this.config.templateField);if(!t&&!this.config.template){return false;}
var template=this.config.template?this.config.template:t.getValue();this.getUpdater().update({url:MODx.config.manager_url+'?a=resource/tvs',method:'GET',params:{'class_key':this.config.class_key,'template':template,'resource':this.config.resource},scripts:true,callback:function(){this.fireEvent('load');if(MODx.afterTVLoad){MODx.afterTVLoad();}},scope:this});}});Ext.reg('modx-panel-resource-tv',MODx.panel.ResourceTV);;MODx.panel.Resource=function(config){config=config||{record:{}};config.record=config.record||{};Ext.applyIf(config,{url:MODx.config.connector_url,baseParams:{},id:'modx-panel-resource',class_key:'modDocument',resource:'',bodyStyle:'',cls:'container form-with-labels',defaults:{collapsible:false,autoHeight:true},forceLayout:true,items:this.getFields(config),fileUpload:true,useLoadingMask:true,listeners:{'setup':{fn:this.setup,scope:this},'success':{fn:this.success,scope:this},'failure':{fn:this.failure,scope:this},'beforeSubmit':{fn:this.beforeSubmit,scope:this},'fieldChange':{fn:this.onFieldChange,scope:this}}});MODx.panel.Resource.superclass.constructor.call(this,config);var ta=Ext.get('ta');if(ta){ta.on('keydown',this.fieldChangeEvent,this);}
this.on('ready',this.onReady,this);var urio=Ext.getCmp('modx-resource-uri-override');if(urio){urio.on('check',this.freezeUri);}
this.addEvents('tv-reset');};Ext.extend(MODx.panel.Resource,MODx.FormPanel,{initialized:false,defaultClassKey:'modDocument',classLexiconKey:'document',rteElements:'ta',rteLoaded:false,warnUnsavedChanges:false,setup:function(){if(!this.initialized){this.getForm().setValues(this.config.record);var pcmb=this.getForm().findField('parent-cmb');if(pcmb&&Ext.isEmpty(this.config.record.parent_pagetitle)){pcmb.setValue('');}else if(pcmb){pcmb.setValue(this.config.record.parent_pagetitle+' ('+this.config.record.parent+')');}
if(!Ext.isEmpty(this.config.record.pagetitle)){Ext.getCmp('modx-resource-header').getEl().update('<h2>'+Ext.util.Format.stripTags(this.config.record.pagetitle)+'</h2>');}
if(!Ext.isEmpty(this.config.record.resourceGroups)){var g=Ext.getCmp('modx-grid-resource-security');if(g&&Ext.isEmpty(g.config.url)){var s=g.getStore();if(s){s.loadData(this.config.record.resourceGroups);}}}
this.defaultClassKey=this.config.record.class_key||this.defaultClassKey;this.defaultValues=this.config.record||{};if((this.config.record&&this.config.record.richtext)||MODx.request.reload||MODx.request.activeSave==1){this.markDirty();}
if(MODx.config.confirm_navigation==1){var panel=this;window.onbeforeunload=function(){if(panel.warnUnsavedChanges)return _('unsaved_changes');};}
if(this.config.record.deleted){this.handlePreview('hide');}}
if(MODx.config.use_editor&&MODx.loadRTE){var f=this.getForm().findField('richtext');if(f&&f.getValue()==1&&!this.rteLoaded){MODx.loadRTE(this.rteElements);this.rteLoaded=true;}else if(f&&f.getValue()==0&&this.rteLoaded){if(MODx.unloadRTE){MODx.unloadRTE(this.rteElements);}
this.rteLoaded=false;}}
this.fireEvent('ready');this.initialized=true;MODx.fireEvent('ready');MODx.sleep(4);if(MODx.afterTVLoad){MODx.afterTVLoad();}
this.fireEvent('load');},handlePreview:function(action){var previewBtn=Ext.getCmp('modx-abtn-preview');if(previewBtn==undefined){Ext.defer(function(){this.handlePreview(action);},200,this);}else{var toolBar=Ext.getCmp('modx-page-update-resource').ab,btnIndex=toolBar.items.indexOf(previewBtn);previewBtn[action]();toolBar.items.get(btnIndex+1)[action]();}},beforeDestroy:function(){if(this.rteLoaded&&MODx.unloadRTE){MODx.unloadRTE(this.rteElements);this.rteLoaded=false;}
MODx.panel.Resource.superclass.beforeDestroy.call(this);},beforeSubmit:function(o){var ta=Ext.get('ta');if(ta){var v=ta.dom.value;var hc=Ext.getCmp('hiddenContent');if(hc){hc.setValue(v);}}
var g=Ext.getCmp('modx-grid-resource-security');if(g){Ext.apply(o.form.baseParams,{resource_groups:g.encode()});}
if(ta){this.cleanupEditor();}
if(this.getForm().baseParams.action=='resource/create'){var btn=Ext.getCmp('modx-abtn-save');if(btn){btn.disable();}}
return this.fireEvent('save',{values:this.getForm().getValues(),stay:Ext.state.Manager.get('modx.stay.'+MODx.request.a,'stay')});},success:function(o){this.warnUnsavedChanges=false;var g=Ext.getCmp('modx-grid-resource-security');if(g){g.getStore().commitChanges();}
var t=Ext.getCmp('modx-resource-tree');if(t){var ctx=Ext.getCmp('modx-resource-context-key').getValue();var pa=Ext.getCmp('modx-resource-parent-hidden').getValue();var pao=Ext.getCmp('modx-resource-parent-old-hidden').getValue();var v=ctx+'_'+pa;var n=t.getNodeById(v);if(pa!==pao){t.refresh();Ext.getCmp('modx-resource-parent-old-hidden').setValue(pa);}else{if(typeof n!=="undefined"){n.leaf=false;}
t.refreshNode(v,true);}}
var object=o.result.object;if(this.config.resource&&object.parent!==undefined&&(object.class_key!=this.defaultClassKey||object.parent!=this.defaultValues.parent)){location.href=location.href;}else{if(object.deleted!==this.record.deleted){if(object.deleted){var action='hide';}else{action='show';}
this.handlePreview(action);}
this.record=object;this.getForm().setValues(object);Ext.getCmp('modx-page-update-resource').config.preview_url=object.preview_url;}},failure:function(o){this.warnUnsavedChanges=true;if(this.getForm().baseParams.action=='resource/create'){var btn=Ext.getCmp('modx-abtn-save');if(btn){btn.enable();}}},freezeUri:function(cb){var uri=Ext.getCmp('modx-resource-uri');if(!uri){return false;}
if(cb.checked){uri.show();}else{uri.hide();}},templateWarning:function(){var t=Ext.getCmp('modx-resource-template');if(!t){return false;}
if(t.getValue()!==t.originalValue){Ext.Msg.confirm(_('warning'),_('resource_change_template_confirm'),function(e){if(e=='yes'){var nt=t.getValue();var f=Ext.getCmp('modx-page-update-resource');f.config.action='resource/reload';this.warnUnsavedChanges=false;MODx.activePage.submitForm({success:{fn:function(r){MODx.loadPage(r.result.object.action,'id='+r.result.object.id+'&reload='+r.result.object.reload+'&class_key='+r.result.object.class_key);},scope:this}},{bypassValidCheck:true},{reloadOnly:true});}else{t.setValue(this.config.record.template);}},this);}},onFieldChange:function(o){if(o&&o.field&&o.field.name=='syncsite')return;if(this.isReady||MODx.request.reload){this.warnUnsavedChanges=true;}},cleanupEditor:function(){if(MODx.onSaveEditor){var fld=Ext.getCmp('ta');if(fld){MODx.onSaveEditor(fld);}}},getFields:function(config){var it=[];it.push({title:_(this.classLexiconKey),id:'modx-resource-settings',cls:'modx-resource-tab',layout:'form',labelAlign:'top',labelSeparator:'',bodyCssClass:'tab-panel-wrapper main-wrapper',autoHeight:true,defaults:{border:false,msgTarget:'under',width:400},items:this.getMainFields(config)});it.push({id:'modx-page-settings',title:_('settings'),cls:'modx-resource-tab',layout:'form',forceLayout:true,deferredRender:false,labelWidth:200,bodyCssClass:'main-wrapper',autoHeight:true,defaults:{border:false,msgTarget:'under'},items:this.getSettingFields(config)});if(config.show_tvs&&MODx.config.tvs_below_content!=1){it.push(this.getTemplateVariablesPanel(config));}
if(MODx.perm.resourcegroup_resource_list==1){it.push(this.getAccessPermissionsTab(config));}
var its=[];its.push(this.getPageHeader(config),{id:'modx-resource-tabs',xtype:'modx-tabs',forceLayout:true,deferredRender:false,collapsible:true,animCollapse:false,itemId:'tabs',items:it});var ct=this.getContentField(config);if(ct){its.push({title:_('resource_content'),id:'modx-resource-content',layout:'form',bodyCssClass:'main-wrapper',autoHeight:true,collapsible:true,animCollapse:false,hideMode:'offsets',items:ct});}
if(MODx.config.tvs_below_content==1){var tvs=this.getTemplateVariablesPanel(config);its.push(tvs);}
return its;},getPageHeader:function(config){config=config||{record:{}};return{html:'<h2>'+_('document_new')+'</h2>',id:'modx-resource-header',cls:'modx-page-header',border:false,forceLayout:true,anchor:'100%'};},getTemplateVariablesPanel:function(config){return{xtype:'modx-panel-resource-tv',collapsed:false,resource:config.resource,class_key:config.record.class_key||'modDocument',template:config.record.template,anchor:'100%',border:true,style:'visibility: visible'};},getMainFields:function(config){config=config||{record:{}};return[{layout:'column',border:false,anchor:'100%',id:'modx-resource-main-columns',defaults:{labelSeparator:'',labelAlign:'top',border:false,msgTarget:'under'},items:[{columnWidth:.67,layout:'form',id:'modx-resource-main-left',defaults:{msgTarget:'under'},items:this.getMainLeftFields(config)},{columnWidth:.33,layout:'form',labelWidth:0,border:false,id:'modx-resource-main-right',style:'margin-right: 0',defaults:{msgTarget:'under'},items:this.getMainRightFields(config)}]},{html:MODx.onDocFormRender,border:false},{xtype:'hidden',fieldLabel:_('id'),hideLabel:true,description:'<b>[[*id]]</b><br />',name:'id',id:'modx-resource-id',anchor:'100%',value:config.resource||config.record.id,submitValue:true},{xtype:'hidden',name:'type',value:'document'},{xtype:'hidden',name:'context_key',id:'modx-resource-context-key',value:config.record.context_key||'web'},{xtype:'hidden',name:'content',id:'hiddenContent',value:(config.record.content||config.record.ta)||''},{xtype:'hidden',name:'create-resource-token',id:'modx-create-resource-token',value:config.record.create_resource_token||''},{xtype:'hidden',name:'reloaded',value:!Ext.isEmpty(MODx.request.reload)?1:0},{xtype:'hidden',name:'parent',value:config.record.parent||0,id:'modx-resource-parent-hidden'},{xtype:'hidden',name:'parent-original',value:config.record.parent||0,id:'modx-resource-parent-old-hidden'}];},getMainLeftFields:function(config){config=config||{record:{}};return[{xtype:'textfield',fieldLabel:_('resource_pagetitle')+'<span class="required">*</span>',description:'<b>[[*pagetitle]]</b><br />'+_('resource_pagetitle_help'),name:'pagetitle',id:'modx-resource-pagetitle',maxLength:255,anchor:'100%',allowBlank:false,enableKeyEvents:true,listeners:{'keyup':{scope:this,fn:function(f,e){var titlePrefix=MODx.request.a=='resource/create'?_('new_document'):_('document');var title=Ext.util.Format.stripTags(f.getValue());Ext.getCmp('modx-resource-header').getEl().update('<h2>'+title+'</h2>');}}}},{xtype:'textfield',fieldLabel:_('resource_longtitle'),description:'<b>[[*longtitle]]</b><br />'+_('resource_longtitle_help'),name:'longtitle',id:'modx-resource-longtitle',maxLength:255,anchor:'100%',value:config.record.longtitle||''},{xtype:'textarea',fieldLabel:_('resource_description'),description:'<b>[[*description]]</b><br />'+_('resource_description_help'),name:'description',id:'modx-resource-description',maxLength:255,anchor:'100%',value:config.record.description||''},{xtype:'textarea',fieldLabel:_('resource_summary'),description:'<b>[[*introtext]]</b><br />'+_('resource_summary_help'),name:'introtext',id:'modx-resource-introtext',grow:true,anchor:'100%',value:config.record.introtext||''}];},getMainRightFields:function(config){config=config||{};return[{xtype:'modx-combo-template',fieldLabel:_('resource_template'),description:'<b>[[*template]]</b><br />'+_('resource_template_help'),name:'template',id:'modx-resource-template',anchor:'100%',editable:false,baseParams:{action:'element/template/getList',combo:'1',limit:0},listeners:{'select':{fn:this.templateWarning,scope:this}}},{xtype:'textfield',fieldLabel:_('resource_alias'),description:'<b>[[*alias]]</b><br />'+_('resource_alias_help'),name:'alias',id:'modx-resource-alias',maxLength:100,anchor:'100%',value:config.record.alias||''},{xtype:'textfield',fieldLabel:_('resource_menutitle'),description:'<b>[[*menutitle]]</b><br />'+_('resource_menutitle_help'),name:'menutitle',id:'modx-resource-menutitle',maxLength:255,anchor:'100%',value:config.record.menutitle||''},{xtype:'textfield',fieldLabel:_('resource_link_attributes'),description:'<b>[[*link_attributes]]</b><br />'+_('resource_link_attributes_help'),name:'link_attributes',id:'modx-resource-link-attributes',maxLength:255,anchor:'100%',value:config.record.link_attributes||''},{xtype:'xcheckbox',boxLabel:_('resource_hide_from_menus'),hideLabel:true,description:'<b>[[*hidemenu]]</b><br />'+_('resource_hide_from_menus_help'),name:'hidemenu',id:'modx-resource-hidemenu',inputValue:1,checked:parseInt(config.record.hidemenu)||false},{xtype:'xcheckbox',boxLabel:_('resource_published'),hideLabel:true,description:'<b>[[*published]]</b><br />'+_('resource_published_help'),name:'published',id:'modx-resource-published',inputValue:1,checked:parseInt(config.record.published)}]},getSettingFields:function(config){config=config||{record:{}};var s=[{layout:'column',border:false,anchor:'100%',defaults:{labelSeparator:'',labelAlign:'top',border:false,layout:'form',msgTarget:'under'},items:[{columnWidth:.5,id:'modx-page-settings-left',defaults:{msgTarget:'under'},items:this.getSettingLeftFields(config)},{columnWidth:.5,id:'modx-page-settings-right',defaults:{msgTarget:'under'},items:this.getSettingRightFields(config)}]}];return s;},getSettingLeftFields:function(config){return[{xtype:'modx-field-parent-change',fieldLabel:_('resource_parent'),description:'<b>[[*parent]]</b><br />'+_('resource_parent_help'),name:'parent-cmb',id:'modx-resource-parent',value:config.record.parent||0,anchor:'100%'},{xtype:'modx-combo-class-derivatives',fieldLabel:_('resource_type'),description:'<b>[[*class_key]]</b><br />',name:'class_key',hiddenName:'class_key',id:'modx-resource-class-key',allowBlank:false,value:config.record.class_key||'modDocument',anchor:'100%'},{xtype:'modx-combo-content-type',fieldLabel:_('resource_content_type'),description:'<b>[[*content_type]]</b><br />'+_('resource_content_type_help'),name:'content_type',hiddenName:'content_type',id:'modx-resource-content-type',anchor:'100%',value:config.record.content_type||(MODx.config.default_content_type||1)},{xtype:'modx-combo-content-disposition',fieldLabel:_('resource_contentdispo'),description:'<b>[[*content_dispo]]</b><br />'+_('resource_contentdispo_help'),name:'content_dispo',hiddenName:'content_dispo',id:'modx-resource-content-dispo',anchor:'100%',value:config.record.content_dispo||0},{xtype:'numberfield',fieldLabel:_('resource_menuindex'),description:'<b>[[*menuindex]]</b><br />'+_('resource_menuindex_help'),name:'menuindex',id:'modx-resource-menuindex',width:75,value:parseInt(config.record.menuindex)||0}];},getSettingRightFields:function(config){return[{xtype:'xdatetime',fieldLabel:_('resource_publishedon'),description:'<b>[[*publishedon]]</b><br />'+_('resource_publishedon_help'),name:'publishedon',id:'modx-resource-publishedon',allowBlank:true,dateFormat:MODx.config.manager_date_format,timeFormat:MODx.config.manager_time_format,startDay:parseInt(MODx.config.manager_week_start),dateWidth:120,timeWidth:120,offset_time:MODx.config.server_offset_time,value:config.record.publishedon},{xtype:MODx.config.publish_document?'xdatetime':'hidden',fieldLabel:_('resource_publishdate'),description:'<b>[[*pub_date]]</b><br />'+_('resource_publishdate_help'),name:'pub_date',id:'modx-resource-pub-date',allowBlank:true,dateFormat:MODx.config.manager_date_format,timeFormat:MODx.config.manager_time_format,startDay:parseInt(MODx.config.manager_week_start),dateWidth:120,timeWidth:120,offset_time:MODx.config.server_offset_time,value:config.record.pub_date},{xtype:MODx.config.publish_document?'xdatetime':'hidden',fieldLabel:_('resource_unpublishdate'),description:'<b>[[*unpub_date]]</b><br />'+_('resource_unpublishdate_help'),name:'unpub_date',id:'modx-resource-unpub-date',allowBlank:true,dateFormat:MODx.config.manager_date_format,timeFormat:MODx.config.manager_time_format,startDay:parseInt(MODx.config.manager_week_start),dateWidth:120,timeWidth:120,offset_time:MODx.config.server_offset_time,value:config.record.unpub_date},{xtype:'fieldset',items:this.getSettingRightFieldset(config)}];},getSettingRightFieldset:function(config){return[{layout:'column',id:'modx-page-settings-box-columns',border:false,anchor:'100%',defaults:{labelSeparator:'',labelAlign:'top',border:false,layout:'form',msgTarget:'under'},items:[{columnWidth:.5,id:'modx-page-settings-right-box-left',defaults:{msgTarget:'under'},items:this.getSettingRightFieldsetLeft(config)},{columnWidth:.5,id:'modx-page-settings-right-box-right',defaults:{msgTarget:'under'},items:this.getSettingRightFieldsetRight(config)}]},{xtype:'xcheckbox',boxLabel:_('resource_uri_override'),description:_('resource_uri_override_help'),hideLabel:true,name:'uri_override',value:1,checked:parseInt(config.record.uri_override)?true:false,id:'modx-resource-uri-override'},{xtype:'textfield',fieldLabel:_('resource_uri'),description:'<b>[[*uri]]</b><br />'+_('resource_uri_help'),name:'uri',id:'modx-resource-uri',maxLength:255,anchor:'70%',value:config.record.uri||'',hidden:!config.record.uri_override}];},getSettingRightFieldsetLeft:function(config){return[{xtype:'xcheckbox',boxLabel:_('resource_folder'),description:'<b>[[*isfolder]]</b><br />'+_('resource_folder_help'),hideLabel:true,name:'isfolder',id:'modx-resource-isfolder',inputValue:1,checked:parseInt(config.record.isfolder)||0},{xtype:'xcheckbox',boxLabel:_('resource_searchable'),description:'<b>[[*searchable]]</b><br />'+_('resource_searchable_help'),hideLabel:true,name:'searchable',id:'modx-resource-searchable',inputValue:1,checked:parseInt(config.record.searchable)},{xtype:'xcheckbox',boxLabel:_('resource_richtext'),description:'<b>[[*richtext]]</b><br />'+_('resource_richtext_help'),hideLabel:true,name:'richtext',id:'modx-resource-richtext',inputValue:1,checked:parseInt(config.record.richtext)}];},getSettingRightFieldsetRight:function(config){return[{xtype:'xcheckbox',boxLabel:_('resource_cacheable'),description:'<b>[[*cacheable]]</b><br />'+_('resource_cacheable_help'),hideLabel:true,name:'cacheable',id:'modx-resource-cacheable',inputValue:1,checked:parseInt(config.record.cacheable)},{xtype:'xcheckbox',boxLabel:_('resource_syncsite'),description:_('resource_syncsite_help'),hideLabel:true,name:'syncsite',id:'modx-resource-syncsite',inputValue:1,checked:config.record.syncsite!==undefined&&config.record.syncsite!==null?parseInt(config.record.syncsite):true},{xtype:'xcheckbox',boxLabel:_('deleted'),description:'<b>[[*deleted]]</b>',hideLabel:true,name:'deleted',id:'modx-resource-deleted',inputValue:1,checked:parseInt(config.record.deleted)||false}];},getContentField:function(config){return[{id:'modx-content-above',border:false},{xtype:'textarea',name:'ta',id:'ta',cls:'modx-code-content',hideLabel:true,anchor:'100%',height:400,grow:false,value:(config.record.content||config.record.ta)||''},{id:'modx-content-below',border:false}];},getAccessPermissionsTab:function(config){return{id:'modx-resource-access-permissions',autoHeight:true,title:_('resource_groups'),layout:'form',anchor:'100%',items:[{html:'<p>'+_('resource_access_message')+'</p>',bodyCssClass:'panel-desc',border:false},{xtype:'modx-grid-resource-security',cls:'main-wrapper',preventRender:true,resource:config.resource,mode:config.mode||'update',"parent":config.record["parent"]||0,"token":config.record.create_resource_token,reloaded:!Ext.isEmpty(MODx.request.reload),listeners:{'afteredit':{fn:this.fieldChangeEvent,scope:this}}}]};}});Ext.reg('modx-panel-resource',MODx.panel.Resource);var triggerDirtyField=function(fld){Ext.getCmp('modx-panel-resource').fieldChangeEvent(fld);};MODx.triggerRTEOnChange=function(){triggerDirtyField(Ext.getCmp('ta'));};MODx.fireResourceFormChange=function(f,nv,ov){Ext.getCmp('modx-panel-resource').fireEvent('fieldChange');};;MODx.page.CreateResource=function(config){config=config||{};Ext.applyIf(config,{url:MODx.config.connector_url,formpanel:'modx-panel-resource',id:'modx-page-update-resource',which_editor:'none',action:'resource/create',buttons:this.getButtons(config),components:[{xtype:config.panelXType||'modx-panel-resource',renderTo:config.panelRenderTo||'modx-panel-resource-div',resource:0,record:config.record,access_permissions:config.access_permissions,publish_document:config.publish_document,show_tvs:config.show_tvs,mode:config.mode,url:config.url}]});MODx.page.CreateResource.superclass.constructor.call(this,config);};Ext.extend(MODx.page.CreateResource,MODx.Component,{getButtons:function(cfg){var btns=[];if(cfg.canSave==1){btns.push({process:'resource/create',reload:true,text:_('save'),id:'modx-abtn-save',cls:'primary-button',method:'remote',keys:[{key:MODx.config.keymap_save||'s',ctrl:true}]});}
btns.push({text:_('cancel'),id:'modx-abtn-cancel'});btns.push({text:_('help_ex'),id:'modx-abtn-help',handler:MODx.loadHelpPane});return btns;}});Ext.reg('modx-page-resource-create',MODx.page.CreateResource);;var Articles=function(config){config=config||{};Articles.superclass.constructor.call(this,config);};Ext.extend(Articles,Ext.Component,{page:{},window:{},grid:{},tree:{},panel:{},combo:{},config:{},view:{},extra:{},connector_url:''});Ext.reg('Articles',Articles);Articles=new Articles();Articles.combo.PublishStatus=function(config){config=config||{};Ext.applyIf(config,{store:[[1,_('published')],[0,_('unpublished')]],name:'published',hiddenName:'published',triggerAction:'all',editable:false,selectOnFocus:false,preventRender:true,forceSelection:true,enableKeyEvents:true});Articles.combo.PublishStatus.superclass.constructor.call(this,config);};Ext.extend(Articles.combo.PublishStatus,MODx.combo.ComboBox);Ext.reg('articles-combo-publish-status',Articles.combo.PublishStatus);Articles.combo.FilterStatus=function(config){config=config||{};Ext.applyIf(config,{store:[['',_('articles.all')],['published',_('published')],['unpublished',_('unpublished')],['deleted',_('deleted')]],name:'filter',hiddenName:'filter',triggerAction:'all',editable:false,selectOnFocus:false,preventRender:true,forceSelection:true,enableKeyEvents:true,emptyText:_('articles.filter_ellipsis')});Articles.combo.FilterStatus.superclass.constructor.call(this,config);};Ext.extend(Articles.combo.FilterStatus,MODx.combo.ComboBox);Ext.reg('articles-combo-filter-status',Articles.combo.FilterStatus);Articles.PanelSpacer={html:'<br />',border:false,cls:'articles-panel-spacer'};;Articles.panel.ContainerAdvancedSettings=function(config){config=config||{};var oc={'change':{fn:MODx.fireResourceFormChange},'select':{fn:MODx.fireResourceFormChange}};var twitterAuthedLexiconKey=config.record&&!Ext.isEmpty(config.record.setting_notifyTwitterAccessToken)?'articles.setting.notifyTwitter_desc':'articles.setting.notifyTwitter_notyet_desc';Ext.applyIf(config,{id:'articles-panel-container-advanced-settings',border:false,plain:true,deferredRender:false,anchor:'97%',items:[{title:_('articles.settings_general'),anchor:'100%',defaults:{msgTarget:'under'},items:[{xtype:'combo-boolean',name:'setting_updateServicesEnabled',hiddenName:'setting_updateServicesEnabled',id:'articles-setting-updateServicesEnabled',fieldLabel:_('articles.setting.updateServicesEnabled'),description:MODx.expandHelp?'':_('articles.setting.updateServicesEnabled_desc'),anchor:'40%',value:true,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-updateServicesEnabled',html:_('articles.setting.updateServicesEnabled_desc'),cls:'desc-under'},{xtype:'numberfield',name:'menuindex',id:'articles-menuindex',fieldLabel:_('resource_menuindex'),description:MODx.expandHelp?'':_('resource_menuindex_help'),allowNegative:false,allowDecimals:false,width:120,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-menuindex',html:_('resource_menuindex_help'),cls:'desc-under'},{xtype:'textfield',name:'longtitle',id:'articles-longtitle',fieldLabel:_('resource_longtitle'),description:MODx.expandHelp?'':_('resource_longtitle_help'),anchor:'100%',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-longtitle',html:_('resource_longtitle_help'),cls:'desc-under'},{xtype:'combo-boolean',name:'setting_articlesRichtext',hiddenName:'setting_articlesRichtext',id:'articles-richtext',fieldLabel:_('resource_richtext'),description:MODx.expandHelp?'':_('resource_richtext_help')+' '+_('articles.setting.richtext_desc'),width:120,listeners:oc,value:1},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-richtext',html:_('resource_richtext_help')+' '+_('articles.setting.richtext_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_sortBy',id:'articles-setting-sortBy',fieldLabel:_('articles.setting.sortBy'),description:MODx.expandHelp?'':_('articles.setting.sortBy_desc'),anchor:'100%',value:'publishedon',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-sortBy',html:_('articles.setting.sortBy_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_sortDir',id:'articles-setting-sortDir',fieldLabel:_('articles.setting.sortDir'),description:MODx.expandHelp?'':_('articles.setting.sortDir_desc'),anchor:'100%',value:'DESC'},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-sortDir',html:_('articles.setting.sortDir_desc'),cls:'desc-under',listeners:oc},{xtype:'combo-boolean',name:'setting_archivesIncludeTVs',hiddenName:'setting_archivesIncludeTVs',id:'articles-setting-archivesIncludeTVs',fieldLabel:_('articles.setting.archivesIncludeTVs'),description:MODx.expandHelp?'':_('articles.setting.archivesIncludeTVs_desc'),anchor:'30%',value:1,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-archivesIncludeTVs',html:_('articles.setting.archivesIncludeTVs_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_includeTVsList',id:'articles-setting-includeTVsList',fieldLabel:_('articles.setting.includeTVsList'),description:MODx.expandHelp?'':_('articles.setting.includeTVsList_desc'),anchor:'100%',value:'',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-includeTVsList',html:_('articles.setting.includeTVsList_desc'),cls:'desc-under'},{xtype:'combo-boolean',name:'setting_archivesProcessTVs',hiddenName:'setting_archivesProcessTVs',id:'articles-setting-archivesProcessTVs',fieldLabel:_('articles.setting.archivesProcessTVs'),description:MODx.expandHelp?'':_('articles.setting.archivesProcessTVs_desc'),anchor:'30%',value:0,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-archivesProcessTVs',html:_('articles.setting.archivesProcessTVs_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_processTVsList',id:'articles-setting-processTVsList',fieldLabel:_('articles.setting.processTVsList'),description:MODx.expandHelp?'':_('articles.setting.processTVsList_desc'),anchor:'100%',value:'',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-includeTVsList',html:_('articles.setting.includeTVsList_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_otherGetArchives',id:'articles-setting-otherGetArchives',fieldLabel:_('articles.setting.otherGetArchives'),description:MODx.expandHelp?'':_('articles.setting.otherGetArchives_desc'),anchor:'100%',value:'',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-otherGetArchives',html:_('articles.setting.otherGetArchives_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_articleUriTemplate',id:'articles-setting-articleUriTemplate',fieldLabel:_('articles.setting.articleUriTemplate'),description:MODx.expandHelp?'':_('articles.setting.articleUriTemplate_desc'),anchor:'100%',value:'%Y/%m/%d/%alias/',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-articleUriTemplate',html:_('articles.setting.articleUriTemplate_desc'),cls:'desc-under'}]},{title:_('articles.settings_pagination'),anchor:'100%',defaults:{msgTarget:'under'},items:[{xtype:'numberfield',name:'setting_articlesPerPage',id:'articles-setting-articlesPerPage',fieldLabel:_('articles.setting.articlesPerPage'),description:MODx.expandHelp?'':_('articles.setting.articlesPerPage_desc'),allowNegative:false,allowDecimals:false,width:120,value:10,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-articlesPerPage',html:_('articles.setting.articlesPerPage_desc'),cls:'desc-under'},{xtype:'numberfield',name:'setting_pageLimit',id:'articles-setting-pageLimit',fieldLabel:_('articles.setting.pageLimit'),description:MODx.expandHelp?'':_('articles.setting.pageLimit_desc'),allowNegative:false,allowDecimals:false,width:120,value:5,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-pageLimit',html:_('articles.setting.pageLimit_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_pageNavTpl',id:'articles-setting-pageNavTpl',fieldLabel:_('articles.setting.pageNavTpl'),description:MODx.expandHelp?'':_('articles.setting.pageNavTpl_desc'),anchor:'100%',value:'<li[[+classes]]><a[[+classes]][[+title]] href="[[+href]]">[[+pageNo]]</a></li>',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-pageNavTpl',html:_('articles.setting.pageNavTpl_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_pageActiveTpl',id:'articles-setting-pageActiveTpl',fieldLabel:_('articles.setting.pageActiveTpl'),description:MODx.expandHelp?'':_('articles.setting.pageActiveTpl_desc'),anchor:'100%',value:'<li[[+activeClasses]]><a[[+activeClasses:default=` class="active"`]][[+title]] href="[[+href]]">[[+pageNo]]</a></li>',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-pageActiveTpl',html:_('articles.setting.pageActiveTpl_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_pageFirstTpl',id:'articles-setting-pageFirstTpl',fieldLabel:_('articles.setting.pageFirstTpl'),description:MODx.expandHelp?'':_('articles.setting.pageFirstTpl_desc'),anchor:'100%',value:'<li class="control"><a[[+classes]][[+title]] href="[[+href]]">First</a></li>',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-pageFirstTpl',html:_('articles.setting.pageFirstTpl_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_pageLastTpl',id:'articles-setting-pageLastTpl',fieldLabel:_('articles.setting.pageLastTpl'),description:MODx.expandHelp?'':_('articles.setting.pageLastTpl_desc'),anchor:'100%',value:'<li class="control"><a[[+classes]][[+title]] href="[[+href]]">Last</a></li>',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-pageLastTpl',html:_('articles.setting.pageLastTpl_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_pagePrevTpl',id:'articles-setting-pagePrevTpl',fieldLabel:_('articles.setting.pagePrevTpl'),description:MODx.expandHelp?'':_('articles.setting.pagePrevTpl_desc'),anchor:'100%',value:'<li class="control"><a[[+classes]][[+title]] href="[[+href]]">&lt;&lt;</a></li>',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-pagePrevTpl',html:_('articles.setting.pagePrevTpl_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_pageNextTpl',id:'articles-setting-pageNextTpl',fieldLabel:_('articles.setting.pageNextTpl'),description:MODx.expandHelp?'':_('articles.setting.pageNextTpl_desc'),anchor:'100%',value:'<li class="control"><a[[+classes]][[+title]] href="[[+href]]">&gt;&gt;</a></li>',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-pageNextTpl',html:_('articles.setting.pageNextTpl_desc'),cls:'desc-under'},{xtype:'numberfield',name:'setting_pageOffset',id:'articles-setting-pageOffset',fieldLabel:_('articles.setting.pageOffset'),description:MODx.expandHelp?'':_('articles.setting.pageOffset_desc'),anchor:'30%',minWidth:100,allowNegative:false,allowDecimals:false,value:0,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-pageOffset',html:_('articles.setting.pageOffset_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_pageVarKey',id:'articles-setting-pageVarKey',fieldLabel:_('articles.setting.pageVarKey'),description:MODx.expandHelp?'':_('articles.setting.pageVarKey_desc'),anchor:'100%',value:'page',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-pageVarKey',html:_('articles.setting.pageVarKey_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_pageTotalVar',id:'articles-setting-pageTotalVar',fieldLabel:_('articles.setting.pageTotalVar'),description:MODx.expandHelp?'':_('articles.setting.pageTotalVar_desc'),anchor:'100%',value:'total',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-pageTotalVar',html:_('articles.setting.pageTotalVar_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_pageNavVar',id:'articles-setting-pageNavVar',fieldLabel:_('articles.setting.pageNavVar'),description:MODx.expandHelp?'':_('articles.setting.pageNavVar_desc'),anchor:'100%',value:'page.nav',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-pageNavVar',html:_('articles.setting.pageNavVar_desc'),cls:'desc-under'}]},{title:_('articles.settings_archiving'),anchor:'100%',defaults:{msgTarget:'under'},items:[{xtype:'textfield',name:'setting_tplArchiveMonth',id:'articles-setting-tplArchiveMonth',fieldLabel:_('articles.setting.tplArchiveMonth'),description:MODx.expandHelp?'':_('articles.setting.tplArchiveMonth_desc'),anchor:'100%',value:'row',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-tplArchiveMonth',html:_('articles.setting.tplArchiveMonth_desc'),cls:'desc-under'},{xtype:'numberfield',name:'setting_archiveListingsLimit',id:'articles-setting-archiveListingsLimit',fieldLabel:_('articles.setting.archiveListingsLimit'),description:MODx.expandHelp?'':_('articles.setting.archiveListingsLimit_desc'),allowNegative:false,allowDecimals:false,width:120,value:10,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-archiveListingsLimit',html:_('articles.setting.archiveListingsLimit_desc'),cls:'desc-under'},{xtype:'combo-boolean',name:'setting_archiveByMonth',hiddenName:'setting_archiveByMonth',id:'articles-setting-archiveByMonth',fieldLabel:_('articles.setting.archiveByMonth'),description:MODx.expandHelp?'':_('articles.setting.archiveByMonth_desc'),anchor:'30%',value:1,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-archiveByMonth',html:_('articles.setting.archiveByMonth_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_archiveCls',id:'articles-setting-archiveCls',fieldLabel:_('articles.setting.archiveCls'),description:MODx.expandHelp?'':_('articles.setting.archiveCls_desc'),anchor:'100%',valie:'arc-row',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-archiveCls',html:_('articles.setting.archiveCls_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_archiveAltCls',id:'articles-setting-archiveAltCls',fieldLabel:_('articles.setting.archiveAltCls'),description:MODx.expandHelp?'':_('articles.setting.archiveAltCls_desc'),anchor:'100%',value:'arc-row-alt',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-archiveAltCls',html:_('articles.setting.archiveAltCls_desc'),cls:'desc-under'},{xtype:'combo-boolean',name:'setting_archiveGroupByYear',hiddenName:'setting_archiveGroupByYear',id:'articles-setting-archiveGroupByYear',fieldLabel:_('articles.setting.archiveGroupByYear'),description:MODx.expandHelp?'':_('articles.setting.archiveGroupByYear_desc'),anchor:'30%',value:0,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-archiveGroupByYear',html:_('articles.setting.archiveGroupByYear_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_archiveGroupByYearTpl',id:'articles-setting-archiveGroupByYearTpl',fieldLabel:_('articles.setting.archiveGroupByYearTpl'),description:MODx.expandHelp?'':_('articles.setting.archiveGroupByYearTpl_desc'),anchor:'100%',value:'sample.ArchiveGroupByYear',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-archiveGroupByYearTpl',html:_('articles.setting.archiveGroupByYearTpl_desc'),cls:'desc-under'}]},{title:_('articles.settings_tagging'),anchor:'100%',defaults:{msgTarget:'under'},items:[{xtype:'textfield',name:'setting_tplTagRow',id:'articles-setting-tplTagRow',fieldLabel:_('articles.setting.tplTagRow'),description:MODx.expandHelp?'':_('articles.setting.tplTagRow_desc'),anchor:'100%',value:'tag',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-tplTagRow',html:_('articles.setting.tplTagRow_desc'),cls:'desc-under'},{xtype:'numberfield',name:'setting_tagsLimit',id:'articles-setting-tagsLimit',fieldLabel:_('articles.setting.tagsLimit'),description:MODx.expandHelp?'':_('articles.setting.tagsLimit_desc'),allowNegative:false,allowDecimals:false,width:120,value:10,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-tagsLimit',html:_('articles.setting.tagsLimit_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_tagCls',id:'articles-setting-tagCls',fieldLabel:_('articles.setting.tagCls'),description:MODx.expandHelp?'':_('articles.setting.tagCls_desc'),anchor:'100%',value:'tl-tag',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-tagCls',html:_('articles.setting.tagCls_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_tagAltCls',id:'articles-setting-tagAltCls',fieldLabel:_('articles.setting.tagAltCls'),description:MODx.expandHelp?'':_('articles.setting.tagAltCls_desc'),anchor:'100%',value:'tl-tag-alt',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-tagAltCls',html:_('articles.setting.tagAltCls_desc'),cls:'desc-under'}]},{title:_('articles.settings_rss'),anchor:'100%',defaults:{msgTarget:'under'},items:[{xtype:'textfield',name:'setting_rssAlias',id:'articles-setting-rssAlias',fieldLabel:_('articles.setting.rssAlias'),description:MODx.expandHelp?'':_('articles.setting.rssAlias_desc'),anchor:'100%',value:'feed.rss,rss',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-rssAlias',html:_('articles.setting.rssAlias_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_rssItems',id:'articles-setting-rssItems',fieldLabel:_('articles.setting.rssItems'),description:MODx.expandHelp?'':_('articles.setting.rssItems_desc'),width:120,value:10,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-rssItems',html:_('articles.setting.rssItems_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_tplRssFeed',id:'articles-setting-tplRssFeed',fieldLabel:_('articles.setting.tplRssFeed'),description:MODx.expandHelp?'':_('articles.setting.tplRssFeed_desc'),anchor:'100%',value:'sample.ArticlesRss',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-tplRssFeed',html:_('articles.setting.tplRssFeed_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_tplRssItem',id:'articles-setting-tplRssItem',fieldLabel:_('articles.setting.tplRssItem'),description:MODx.expandHelp?'':_('articles.setting.tplRssItem_desc'),anchor:'100%',value:'sample.ArticlesRssItem',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-tplRssItem',html:_('articles.setting.tplRssItem_desc'),cls:'desc-under'}]},{title:_('articles.settings_latest_posts'),anchor:'100%',defaults:{msgTarget:'under'},items:[{xtype:'textfield',name:'setting_latestPostsTpl',id:'articles-setting-latestPostsTpl',fieldLabel:_('articles.setting.latestPostsTpl'),description:MODx.expandHelp?'':_('articles.setting.latestPostsTpl_desc'),anchor:'100%',value:'sample.ArticlesLatestPostTpl',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-latestPostsTpl',html:_('articles.setting.latestPostsTpl_desc'),cls:'desc-under'},{xtype:'numberfield',name:'setting_latestPostsLimit',id:'articles-setting-latestPostsLimit',fieldLabel:_('articles.setting.latestPostsLimit'),description:MODx.expandHelp?'':_('articles.setting.latestPostsLimit_desc'),width:120,allowNegative:false,allowDecimals:false,value:5,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-latestPostsLimit',html:_('articles.setting.latestPostsLimit_desc'),cls:'desc-under'},{xtype:'numberfield',name:'setting_latestPostsOffset',id:'articles-setting-latestPostsOffset',fieldLabel:_('articles.setting.latestPostsOffset'),description:MODx.expandHelp?'':_('articles.setting.latestPostsOffset_desc'),width:120,allowNegative:false,allowDecimals:false,value:0,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-latestPostsOffset',html:_('articles.setting.latestPostsOffset_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_otherLatestPosts',id:'articles-setting-otherLatestPosts',fieldLabel:_('articles.setting.otherLatestPosts'),description:MODx.expandHelp?'':_('articles.setting.otherLatestPosts_desc'),anchor:'100%',value:'',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-latestPostsOffset',html:_('articles.setting.latestPostsOffset_desc'),cls:'desc-under'}]},{title:_('articles.settings_notifications'),anchor:'100%',defaults:{msgTarget:'under'},items:[{xtype:'combo-boolean',name:'setting_notifyTwitter',hiddenName:'setting_notifyTwitter',id:'articles-setting-notifyTwitter',fieldLabel:_('articles.setting.notifyTwitter'),description:MODx.expandHelp?'':_(twitterAuthedLexiconKey,{authUrl:Articles.assets_url+'twitter.auth.php?container='+MODx.request.id}),anchor:'30%',value:false,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-notifyTwitter',html:_(twitterAuthedLexiconKey,{authUrl:Articles.assets_url+'twitter.auth.php?container='+MODx.request.id}),cls:'desc-under'},{xtype:'text-password',name:'setting_notifyTwitterConsumerKey',id:'articles-setting-notifyTwitterConsumerKey',fieldLabel:_('articles.setting.notifyTwitterConsumerKey'),description:MODx.expandHelp?'':_('articles.setting.notifyTwitterConsumerKey_desc'),anchor:'100%',value:'',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-notifyTwitterConsumerKey',html:_('articles.setting.notifyTwitterConsumerKey_desc'),cls:'desc-under'},{xtype:'text-password',name:'setting_notifyTwitterConsumerKeySecret',id:'articles-setting-notifyTwitterConsumerKeySecret',fieldLabel:_('articles.setting.notifyTwitterConsumerKeySecret'),description:MODx.expandHelp?'':_('articles.setting.notifyTwitterConsumerKeySecret_desc'),anchor:'100%',value:'',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-notifyTwitterConsumerKeySecret',html:_('articles.setting.notifyTwitterConsumerKeySecret_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_notifyTwitterTpl',id:'articles-setting-notifyTwitterTpl',fieldLabel:_('articles.setting.notifyTwitterTpl'),description:MODx.expandHelp?'':_('articles.setting.notifyTwitterTpl_desc'),anchor:'100%',value:'',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-notifyTwitterTpl',html:_('articles.setting.notifyTwitterTpl_desc'),cls:'desc-under'},{xtype:'numberfield',name:'setting_notifyTwitterTagLimit',id:'articles-setting-notifyTwitterTagLimit',fieldLabel:_('articles.setting.notifyTwitterTagLimit'),description:MODx.expandHelp?'':_('articles.setting.notifyTwitterTagLimit_desc'),anchor:'30%',value:3,allowNegative:false,allowDecimals:false,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-notifyTwitterTagLimit',html:_('articles.setting.notifyTwitterTagLimit_desc'),cls:'desc-under'},{xtype:'articles-combo-shorteners',name:'setting_shorteningService',hiddenName:'setting_shorteningService',id:'articles-setting-shorteningService',fieldLabel:_('articles.setting.shorteningService'),description:MODx.expandHelp?'':_('articles.setting.shorteningService_desc'),anchor:'30%',value:'tinyurl',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-shorteningService',html:_('articles.setting.shorteningService_desc'),cls:'desc-under'}]},{title:_('articles.settings_comments'),anchor:'100%',defaults:{msgTarget:'under'},items:[{xtype:'combo-boolean',name:'setting_commentsEnabled',hiddenName:'setting_commentsEnabled',id:'articles-setting-commentsEnabled',fieldLabel:_('articles.setting.commentsEnabled'),description:MODx.expandHelp?'':_('articles.setting.commentsEnabled_desc'),anchor:'30%',value:1,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsEnabled',html:_('articles.setting.commentsEnabled_desc'),cls:'desc-under'},{xtype:'combo-boolean',name:'setting_commentsThreaded',hiddenName:'setting_commentsThreaded',id:'articles-setting-commentsThreaded',fieldLabel:_('articles.setting.commentsThreaded'),description:MODx.expandHelp?'':_('articles.setting.commentsThreaded_desc'),anchor:'30%',value:0,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsThreaded',html:_('articles.setting.commentsThreaded_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsReplyResourceId',id:'articles-setting-commentsReplyResourceId',fieldLabel:_('articles.setting.commentsReplyResourceId'),description:MODx.expandHelp?'':_('articles.setting.commentsReplyResourceId_desc'),anchor:'30%',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsReplyResourceId',html:_('articles.setting.commentsReplyResourceId_desc'),cls:'desc-under'},{xtype:'numberfield',name:'setting_commentsMaxDepth',id:'articles-setting-commentsMaxDepth',fieldLabel:_('articles.setting.commentsMaxDepth'),description:MODx.expandHelp?'':_('articles.setting.commentsMaxDepth_desc'),anchor:'30%',allowDecimals:false,allowNegative:false,value:5,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsMaxDepth',html:_('articles.setting.commentsMaxDepth_desc'),cls:'desc-under'},{xtype:'combo-boolean',name:'setting_commentsRequirePreview',hiddenName:'setting_commentsRequirePreview',id:'articles-setting-commentsRequirePreview',fieldLabel:_('articles.setting.commentsRequirePreview'),description:MODx.expandHelp?'':_('articles.setting.commentsRequirePreview_desc'),anchor:'30%',value:0,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsRequirePreview',html:_('articles.setting.commentsRequirePreview_desc'),cls:'desc-under'},{xtype:'numberfield',name:'setting_commentsCloseAfter',id:'articles-setting-commentsCloseAfter',fieldLabel:_('articles.setting.commentsCloseAfter'),description:MODx.expandHelp?'':_('articles.setting.commentsCloseAfter_desc'),anchor:'30%',allowDecimals:false,allowNegative:false,value:0,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsCloseAfter',html:_('articles.setting.commentsCloseAfter_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsDateFormat',id:'articles-setting-commentsDateFormat',fieldLabel:_('articles.setting.commentsDateFormat'),description:MODx.expandHelp?'':_('articles.setting.commentsDateFormat_desc'),anchor:'100%',value:'%b %d, %Y at %I:%M %p',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsDateFormat',html:_('articles.setting.commentsDateFormat_desc'),cls:'desc-under'},{xtype:'combo-boolean',name:'setting_commentsAutoConvertLinks',hiddenName:'setting_commentsAutoConvertLinks',id:'articles-setting-commentsAutoConvertLinks',fieldLabel:_('articles.setting.commentsAutoConvertLinks'),description:MODx.expandHelp?'':_('articles.setting.commentsAutoConvertLinks_desc'),anchor:'30%',value:1,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsAutoConvertLinks',html:_('articles.setting.commentsAutoConvertLinks_desc'),cls:'desc-under'},{xtype:'numberfield',name:'setting_commentsLimit',id:'articles-setting-commentsLimit',fieldLabel:_('articles.setting.commentsLimit'),description:MODx.expandHelp?'':_('articles.setting.commentsLimit_desc'),anchor:'30%',allowDecimals:false,allowNegative:false,value:0,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsLimit',html:_('articles.setting.commentsLimit_desc'),cls:'desc-under'}]},{title:' &#8212; '+_('articles.settings_comments_display'),anchor:'100%',defaults:{msgTarget:'under'},items:[{xtype:'textfield',name:'setting_commentsTplComment',id:'articles-setting-commentsTplComment',fieldLabel:_('articles.setting.commentsTplComment'),description:MODx.expandHelp?'':_('articles.setting.commentsTplComment_desc'),anchor:'100%',value:'quipComment',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsTplComment',html:_('articles.setting.commentsTplComment_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsTplCommentOptions',id:'articles-setting-commentsTplCommentOptions',fieldLabel:_('articles.setting.commentsTplCommentOptions'),description:MODx.expandHelp?'':_('articles.setting.commentsTplCommentOptions_desc'),anchor:'100%',value:'quipCommentOptions',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsTplCommentOptions',html:_('articles.setting.commentsTplCommentOptions_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsTplComments',id:'articles-setting-commentsTplComments',fieldLabel:_('articles.setting.commentsTplComments'),description:MODx.expandHelp?'':_('articles.setting.commentsTplComments_desc'),anchor:'100%',value:'quipComments',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsTplComments',html:_('articles.setting.commentsTplComments_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsTplAddComment',id:'articles-setting-commentsAddComment',fieldLabel:_('articles.setting.commentsTplAddComment'),description:MODx.expandHelp?'':_('articles.setting.commentsTplAddComment_desc'),anchor:'100%',value:'quipAddComment',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsTplAddComment',html:_('articles.setting.commentsTplAddComment_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsTplLoginToComment',id:'articles-setting-commentsTplLoginToComment',fieldLabel:_('articles.setting.commentsTplLoginToComment'),description:MODx.expandHelp?'':_('articles.commentsTplLoginToComment_desc'),anchor:'100%',value:'quipLoginToComment',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsTplLoginToComment',html:_('articles.setting.commentsTplLoginToComment_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsTplPreview',id:'articles-setting-commentsTplPreview',fieldLabel:_('articles.setting.commentsTplPreview'),description:MODx.expandHelp?'':_('articles.commentsTplPreview_desc'),anchor:'100%',value:'quipPreviewComment',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsTplPreview',html:_('articles.setting.commentsTplPreview_desc'),cls:'desc-under'},{html:'<hr />',border:false},{xtype:'combo-boolean',name:'setting_commentsUseCss',hiddenName:'setting_commentsUseCss',id:'articles-setting-commentsUseCss',fieldLabel:_('articles.setting.commentsUseCss'),description:MODx.expandHelp?'':_('articles.setting.commentsUseCss_desc'),anchor:'30%',value:1,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsUseCss',html:_('articles.setting.commentsUseCss_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsAltRowCss',id:'articles-setting-commentsAltRowCss',fieldLabel:_('articles.setting.commentsAltRowCss'),description:MODx.expandHelp?'':_('articles.setting.commentsAltRowCss_desc'),anchor:'100%',value:'quip-comment-alt',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsAltRowCss',html:_('articles.setting.commentsAltRowCss_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsSortDir',id:'articles-setting-commentsSortDir',fieldLabel:_('articles.setting.commentsSortDir'),description:MODx.expandHelp?'':_('articles.setting.commentsSortDir_desc'),anchor:'100%',value:'ASC',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsSortDir',html:_('articles.setting.commentsSortDir_desc'),cls:'desc-under'}]},{title:' &#8212; '+_('articles.settings_comments_moderation'),anchor:'100%',defaults:{msgTarget:'under'},items:[{xtype:'combo-boolean',name:'setting_commentsRequireAuth',hiddenName:'setting_commentsRequireAuth',id:'articles-setting-commentsRequireAuth',fieldLabel:_('articles.setting.commentsRequireAuth'),description:MODx.expandHelp?'':_('articles.setting.commentsRequireAuth_desc'),anchor:'30%',value:0,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsRequireAuth',html:_('articles.setting.commentsRequireAuth_desc'),cls:'desc-under'},{xtype:'combo-boolean',name:'setting_commentsModerate',hiddenName:'setting_commentsModerate',id:'articles-setting-commentsModerate',fieldLabel:_('articles.setting.commentsModerate'),description:MODx.expandHelp?'':_('articles.setting.commentsModerate_desc'),anchor:'30%',value:1,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsModerate',html:_('articles.setting.commentsModerate_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsModerators',id:'articles-setting-commentsModerators',fieldLabel:_('articles.setting.commentsModerators'),description:MODx.expandHelp?'':_('articles.setting.commentsModerators_desc'),anchor:'100%',value:'',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsModerators',html:_('articles.setting.commentsModerators_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsModeratorGroup',id:'articles-setting-commentsModeratorGroup',fieldLabel:_('articles.setting.commentsModeratorGroup'),description:MODx.expandHelp?'':_('articles.setting.commentsModeratorGroup_desc'),anchor:'100%',value:'Administrator',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsModeratorGroup',html:_('articles.setting.commentsModeratorGroup_desc'),cls:'desc-under'},{xtype:'combo-boolean',name:'setting_commentsModerateAnonymousOnly',hiddenName:'setting_commentsModerateAnonymousOnly',id:'articles-setting-commentsModerateAnonymousOnly',fieldLabel:_('articles.setting.commentsModerateAnonymousOnly'),description:MODx.expandHelp?'':_('articles.setting.commentsModerateAnonymousOnly_desc'),anchor:'30%',value:0,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsModerateAnonymousOnly',html:_('articles.setting.commentsModerateAnonymousOnly_desc'),cls:'desc-under'},{xtype:'combo-boolean',name:'setting_commentsModerateFirstPostOnly',hiddenName:'setting_commentsModerateFirstPostOnly',id:'articles-setting-commentsModerateFirstPostOnly',fieldLabel:_('articles.setting.commentsModerateFirstPostOnly'),description:MODx.expandHelp?'':_('articles.setting.commentsModerateFirstPostOnly_desc'),anchor:'30%',value:1,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsModerateFirstPostOnly',html:_('articles.setting.commentsModerateFirstPostOnly_desc'),cls:'desc-under'},{html:'<hr />',border:false},{xtype:'combo-boolean',name:'setting_commentsReCaptcha',hiddenName:'setting_commentsReCaptcha',id:'articles-setting-commentsReCaptcha',fieldLabel:_('articles.setting.commentsReCaptcha'),description:MODx.expandHelp?'':_('articles.setting.commentsReCaptcha_desc'),anchor:'30%',value:0,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsReCaptcha',html:_('articles.setting.commentsReCaptcha_desc'),cls:'desc-under'},{xtype:'combo-boolean',name:'setting_commentsDisableReCaptchaWhenLoggedIn',hiddenName:'setting_commentsDisableReCaptchaWhenLoggedIn',id:'articles-setting-commentsDisableReCaptchaWhenLoggedIn',fieldLabel:_('articles.setting.commentsDisableReCaptchaWhenLoggedIn'),description:MODx.expandHelp?'':_('articles.setting.commentsDisableReCaptchaWhenLoggedIn_desc'),anchor:'30%',value:1,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsDisableReCaptchaWhenLoggedIn',html:_('articles.setting.commentsDisableReCaptchaWhenLoggedIn_desc'),cls:'desc-under'},{html:'<hr />',border:false},{xtype:'combo-boolean',name:'setting_commentsAllowRemove',hiddenName:'setting_commentsAllowRemove',id:'articles-setting-commentsAllowRemove',fieldLabel:_('articles.setting.commentsAllowRemove'),description:MODx.expandHelp?'':_('articles.setting.commentsAllowRemove_desc'),anchor:'30%',value:1,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsAllowRemove',html:_('articles.setting.commentsAllowRemove_desc'),cls:'desc-under'},{xtype:'numberfield',name:'setting_commentsRemoveThreshold',id:'articles-setting-commentsRemoveThreshold',fieldLabel:_('articles.setting.commentsRemoveThreshold'),description:MODx.expandHelp?'':_('articles.setting.commentsRemoveThreshold_desc'),anchor:'30%',allowDecimals:false,allowNegative:false,value:3,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsRemoveThreshold',html:_('articles.setting.commentsRemoveThreshold_desc'),cls:'desc-under'},{xtype:'combo-boolean',name:'setting_commentsAllowReportAsSpam',hiddenName:'setting_commentsAllowReportAsSpam',id:'articles-setting-commentsAllowReportAsSpam',fieldLabel:_('articles.setting.commentsAllowReportAsSpam'),description:MODx.expandHelp?'':_('articles.setting.commentsAllowReportAsSpam_desc'),anchor:'30%',value:1,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsAllowReportAsSpam',html:_('articles.setting.commentsAllowReportAsSpam_desc'),cls:'desc-under'}]},{title:' &#8212; '+_('articles.settings_comments_latest'),anchor:'100%',defaults:{msgTarget:'under'},items:[{xtype:'textfield',name:'setting_latestCommentsTpl',id:'articles-setting-latestCommentsTpl',fieldLabel:_('articles.setting.latestCommentsTpl'),description:MODx.expandHelp?'':_('articles.setting.latestCommentsTpl_desc'),anchor:'100%',value:'quipLatestComment',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-latestCommentsTpl',html:_('articles.setting.latestCommentsTpl_desc'),cls:'desc-under'},{xtype:'numberfield',name:'setting_latestCommentsLimit',id:'articles-setting-latestCommentsLimit',fieldLabel:_('articles.setting.latestCommentsLimit'),description:MODx.expandHelp?'':_('articles.setting.latestCommentsLimit_desc'),width:120,allowNegative:false,allowDecimals:false,value:10,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-latestCommentsLimit',html:_('articles.setting.latestCommentsLimit_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_latestCommentsBodyLimit',id:'articles-setting-latestCommentsBodyLimit',fieldLabel:_('articles.setting.latestCommentsBodyLimit'),description:MODx.expandHelp?'':_('articles.setting.latestCommentsBodyLimit_desc'),width:150,allowNegative:false,allowDecimals:false,value:300,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-latestCommentsBodyLimit',html:_('articles.setting.latestCommentsBodyLimit_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_latestCommentsRowCss',id:'articles-setting-latestCommentsRowCss',fieldLabel:_('articles.setting.latestCommentsRowCss'),description:MODx.expandHelp?'':_('articles.setting.latestCommentsRowCss_desc'),anchor:'100%',value:'quip-latest-comment',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-latestCommentsRowCss',html:_('articles.setting.latestCommentsRowCss_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_latestCommentsAltRowCss',id:'articles-setting-latestCommentsAltRowCss',fieldLabel:_('articles.setting.latestCommentsAltRowCss'),description:MODx.expandHelp?'':_('articles.setting.latestCommentsAltRowCss_desc'),anchor:'100%',value:'quip-latest-comment-alt',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-latestCommentsAltRowCss',html:_('articles.setting.latestCommentsAltRowCss_desc'),cls:'desc-under'}]},{title:' &#8212; '+_('articles.settings_comments_other'),anchor:'100%',defaults:{msgTarget:'under'},items:[{xtype:'combo-boolean',name:'setting_commentsGravatar',hiddenName:'setting_commentsGravatar',id:'articles-setting-commentsGravatar',fieldLabel:_('articles.setting.commentsGravatar'),description:MODx.expandHelp?'':_('articles.setting.commentsGravatar_desc'),anchor:'30%',value:1,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsGravatar',html:_('articles.setting.commentsGravatar_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsGravatarIcon',id:'articles-setting-commentsGravatarIcon',fieldLabel:_('articles.setting.commentsGravatarIcon'),description:MODx.expandHelp?'':_('articles.setting.commentsGravatarIcon_desc'),anchor:'100%',value:'identicon',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsGravatarIcon',html:_('articles.setting.commentsGravatarIcon_desc'),cls:'desc-under'},{xtype:'numberfield',name:'setting_commentsGravatarSize',id:'articles-setting-commentsGravatarSize',fieldLabel:_('articles.setting.commentsGravatarSize'),description:MODx.expandHelp?'':_('articles.setting.commentsGravatarSize_desc'),anchor:'100%',allowNegative:false,value:50,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsGravatarSize',html:_('articles.setting.commentsGravatarSize_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsNameField',id:'articles-setting-commentsNameField',fieldLabel:_('articles.setting.commentsNameField'),description:MODx.expandHelp?'':_('articles.setting.commentsNameField_desc'),anchor:'100%',value:'name',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsNameField',html:_('articles.setting.commentsNameField_desc'),cls:'desc-under'},{xtype:'combo-boolean',name:'setting_commentsShowAnonymousName',hiddenName:'setting_commentsShowAnonymousName',id:'articles-setting-commentsShowAnonymousName',fieldLabel:_('articles.setting.commentsShowAnonymousName'),description:MODx.expandHelp?'':_('articles.setting.commentsShowAnonymousName'),anchor:'30%',value:0,listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsShowAnonymousName',html:_('articles.setting.commentsShowAnonymousName_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_commentsAnonymousName',id:'articles-setting-commentsAnonymousName',fieldLabel:_('articles.setting.commentsAnonymousName'),description:MODx.expandHelp?'':_('articles.setting.commentsAnonymousName_desc'),anchor:'100%',value:'Anonymous',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-commentsAnonymousName',html:_('articles.setting.commentsAnonymousName_desc'),cls:'desc-under'}]}]});Articles.panel.ContainerAdvancedSettings.superclass.constructor.call(this,config);};Ext.extend(Articles.panel.ContainerAdvancedSettings,MODx.VerticalTabs,{});Ext.reg('articles-tab-advanced-settings',Articles.panel.ContainerAdvancedSettings);Articles.panel.ContainerTemplateSettings=function(config){config=config||{};Ext.applyIf(config,{id:'articles-panel-container-template-settings',layout:'column',border:false,anchor:'100%',defaults:{layout:'form',labelAlign:'top',anchor:'100%',border:false,labelSeparator:''},items:this.getItems(config)});Articles.panel.ContainerTemplateSettings.superclass.constructor.call(this,config);};Ext.extend(Articles.panel.ContainerTemplateSettings,MODx.Panel,{getItems:function(config){var oc={'change':{fn:MODx.fireResourceFormChange},'select':{fn:MODx.fireResourceFormChange}};var flds=[];flds.push({xtype:'modx-combo-template',fieldLabel:_('resource_template'),description:MODx.expandHelp?'':'<b>[[*template]]</b><br />'+_('resource_template_help'),name:'template',id:'modx-resource-template',anchor:'100%',editable:false,value:config.record.template||MODx.config['articles.default_container_template'],listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'modx-resource-template',id:'modx-resource-template-label',html:_('articles.template_desc'),cls:'desc-under'});var ct=this.getContentField(config);for(var f in ct){flds.push(ct[f]);}
return[{columnWidth:.5,items:flds},{columnWidth:.5,items:[{xtype:'modx-combo-template',name:'setting_articleTemplate',hiddenName:'setting_articleTemplate',id:'articles-setting-articleTemplate',fieldLabel:_('articles.setting.articleTemplate'),description:MODx.expandHelp?'':_('articles.setting.articleTemplate_desc'),anchor:'100%',value:config.record.setting_articleTemplate||MODx.config['articles.default_article_template'],listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-articleTemplate',html:_('articles.setting.articleTemplate_desc'),cls:'desc-under'},{xtype:'textfield',name:'setting_tplArticleRow',id:'articles-setting-tplArticleRow',fieldLabel:_('articles.setting.tplArticleRow'),description:MODx.expandHelp?'':_('articles.setting.tplArticleRow_desc'),anchor:'100%',value:config.record.setting_tplArticleRow||'sample.ArticleRowTpl',listeners:oc},{xtype:MODx.expandHelp?'label':'hidden',forId:'articles-setting-tplArticleRow',html:_('articles.setting.tplArticleRow_desc'),cls:'desc-under'}]}];},getContentField:function(config){return[{id:'modx-content-above',border:false},{xtype:'textarea',name:'ta',id:'ta',fieldLabel:_('articles.content'),anchor:'100%',height:250,grow:false,border:false,value:config.record&&config.record.content?config.record.content:"[[+articles]]\n\n[[!+page.nav:notempty=`\n<div class='paging'>\n\t<ul class='pageList'>\n\t\t[[+paging]]\n\t</ul>\n</div>\n`]]"},{id:'modx-content-below',border:false}];}});Ext.reg('articles-tab-template-settings',Articles.panel.ContainerTemplateSettings);Articles.combo.Shorteners=function(config){config=config||{};Ext.applyIf(config,{store:new Ext.data.SimpleStore({fields:['d','v'],data:[[_('none'),''],['Tinyurl','tinyurl'],['Digg','digg'],['Isgd','isgd']]}),displayField:'d',valueField:'v',mode:'local',triggerAction:'all',editable:false,selectOnFocus:false,preventRender:true,forceSelection:true,enableKeyEvents:true});Articles.combo.Shorteners.superclass.constructor.call(this,config);};Ext.extend(Articles.combo.Shorteners,MODx.combo.ComboBox);Ext.reg('articles-combo-shorteners',Articles.combo.Shorteners);;Articles.grid.ContainerArticles=function(config){config=config||{};this.sm=new Ext.grid.CheckboxSelectionModel();this.exp=new Ext.grid.RowExpander({tpl:new Ext.Template('<p class="desc">{content}</p>')});Ext.applyIf(config,{id:'articles-grid-container-articles',title:_('articles.articles'),url:Articles.connector_url,baseParams:{action:'article/getList','parent':config.resource},saveParams:{resource:config.resource},fields:['id','pagetitle','publishedon','publishedon_date','publishedon_time','uri','uri_override','preview_url','createdby','createdby_username','tags','categories','actions','action_edit','content','comments'],paging:true,remoteSort:true,cls:'articles-grid',bodyCssClass:'grid-with-buttons',sm:this.sm,plugins:[this.exp],emptyText:_('articles.articles_none'),columns:[this.sm,this.exp,{header:_('articles.publishedon'),dataIndex:'publishedon',width:80,sortable:true,renderer:{fn:this._renderPublished,scope:this}},{header:_('articles.article_title'),dataIndex:'pagetitle',id:'main',width:200,sortable:true,renderer:{fn:this._renderPageTitle,scope:this}},{header:_('articles.author'),dataIndex:'createdby_username',width:150,sortable:true,renderer:{fn:this._renderAuthor,scope:this}},{header:'<img src="'+Articles.assets_url+'images/comments-icon-w.png" alt="" class="articles-comments-col-header" />',dataIndex:'comments',width:50,sortable:true,hidden:!Articles.commentsEnabled,renderer:{fn:this._renderComments,scope:this}},{header:_('articles.tags'),dataIndex:'tags',width:200,sortable:true}],tbar:[{text:_('articles.article_create'),handler:this.createArticle,scope:this},{text:_('bulk_actions'),menu:[{text:_('articles.article_selected_publish'),handler:this.publishSelected,scope:this},{text:_('articles.article_selected_unpublish'),handler:this.unpublishSelected,scope:this},'-',{text:_('articles.article_selected_delete'),handler:this.deleteSelected,scope:this},{text:_('articles.article_selected_undelete'),handler:this.undeleteSelected,scope:this}]},'-',{text:_('articles.articles_import'),handler:this.importArticles,scope:this},'->',{xtype:'articles-combo-filter-status',id:'articles-grid-filter-status',value:'',listeners:{'select':{fn:this.filterStatus,scope:this}}},{xtype:'textfield',name:'search',id:'articles-article-search',emptyText:_('search_ellipsis'),listeners:{'change':{fn:this.search,scope:this},'render':{fn:function(cmp){new Ext.KeyMap(cmp.getEl(),{key:Ext.EventObject.ENTER,fn:function(){this.fireEvent('change',this.getValue());this.blur();return true;},scope:cmp});},scope:this}}},{xtype:'button',id:'modx-filter-clear',text:_('filter_clear'),listeners:{'click':{fn:this.clearFilter,scope:this}}}]});Articles.grid.ContainerArticles.superclass.constructor.call(this,config);this._makeTemplates();this.on('click',this.handleButtons,this);};Ext.extend(Articles.grid.ContainerArticles,MODx.grid.Grid,{getMenu:function(){var r=this.getSelectionModel().getSelected();var p=r.data.perm;var m=[];m.push({text:_('articles.article_edit'),handler:this.editArticle});m.push({text:_('articles.article_duplicate'),handler:this.duplicateArticle});return m;},filterStatus:function(cb,nv,ov){this.getStore().baseParams.filter=Ext.isEmpty(nv)||Ext.isObject(nv)?cb.getValue():nv;this.getBottomToolbar().changePage(1);this.refresh();return true;},search:function(tf,newValue,oldValue){var nv=newValue||tf;this.getStore().baseParams.query=Ext.isEmpty(nv)||Ext.isObject(nv)?'':nv;this.getBottomToolbar().changePage(1);this.refresh();return true;},clearFilter:function(){this.getStore().baseParams={action:'article/getList','parent':this.config.resource};Ext.getCmp('articles-article-search').reset();this.getBottomToolbar().changePage(1);this.refresh();},_makeTemplates:function(){this.tplPublished=new Ext.XTemplate('<tpl for=".">'
+'<div class="articles-grid-date">{publishedon_date}<span class="articles-grid-time">{publishedon_time}</span></div>'
+'</tpl>',{compiled:true});this.tplComments=new Ext.XTemplate('<tpl for=".">'
+'<div class="articles-grid-comments"><span>{comments}</span></div>'
+'</tpl>',{compiled:true});this.tplPageTitle=new Ext.XTemplate('<tpl for="."><div class="article-title-column">'
+'<h3 class="main-column"><a href="{action_edit}" title="Edit {pagetitle}">{pagetitle}</a><span class="article-id">({id})</span></h3>'
+'<tpl if="actions">'
+'<ul class="actions">'
+'<tpl for="actions">'
+'<li><a href="#" class="controlBtn {className}">{text}</a></li>'
+'</tpl>'
+'</ul>'
+'</tpl>'
+'</div></tpl>',{compiled:true});},_renderPublished:function(v,md,rec){return this.tplPublished.apply(rec.data);},_renderPageTitle:function(v,md,rec){return this.tplPageTitle.apply(rec.data);},_renderComments:function(v,md,rec){return this.tplComments.apply(rec.data);},editArticle:function(btn,e){MODx.loadPage(MODx.request.a,'id='+this.menu.record.id);},createArticle:function(btn,e){var tpl='';var panel=Ext.getCmp('modx-panel-resource');var createPage=MODx.action?MODx.action['resource/create']:'resource/create';if(panel&&panel.record){tpl='&template='+panel.record.articles_container_settings.articleTemplate}
MODx.loadPage(createPage,'class_key=Article&parent='+MODx.request.id+'&context_key='+MODx.ctx+tpl);},viewArticle:function(btn,e){window.open(this.menu.record.data.preview_url);return false;},duplicateArticle:function(btn,e){var r={resource:this.menu.record.id,is_folder:false,name:_('duplicate_of',{name:this.menu.record.pagetitle})};var w=MODx.load({xtype:'modx-window-resource-duplicate',resource:this.menu.record.id,hasChildren:false,listeners:{'success':{fn:function(){this.refresh();},scope:this}}});w.config.hasChildren=false;w.setValues(r);w.show(e.target);return false;},importArticles:function(btn,e){var r={'id':MODx.request.id,'service':'MODX'};if(!this.windows.importArticles){this.windows.importArticles=MODx.load({xtype:'articles-window-import',record:r,listeners:{'success':{fn:function(r){this.refresh();},scope:this}}});}
this.windows.importArticles.setValues(r);this.windows.importArticles.show(e.target);},deleteArticle:function(btn,e){MODx.msg.confirm({title:_('articles.article_delete'),text:_('articles.article_delete_confirm'),url:(MODx.config.connector_url)?MODx.config.connector_url:MODx.config.connectors_url+'resource/index.php',params:{action:(MODx.config.connector_url)?'resource/delete':'delete',id:this.menu.record.id},listeners:{'success':{fn:this.refresh,scope:this}}});},deleteSelected:function(btn,e){var cs=this.getSelectedAsList();if(cs===false)return false;MODx.msg.confirm({title:_('articles.article_delete_multiple'),text:_('articles.article_delete_multiple_confirm'),url:this.config.url,params:{action:'article/deleteMultiple',ids:cs},listeners:{'success':{fn:function(r){this.getSelectionModel().clearSelections(true);this.refresh();},scope:this}}});return true;},undeleteSelected:function(btn,e){var cs=this.getSelectedAsList();if(cs===false)return false;MODx.Ajax.request({url:this.config.url,params:{action:'article/undeleteMultiple',ids:cs},listeners:{'success':{fn:function(r){this.getSelectionModel().clearSelections(true);this.refresh();},scope:this}}});return true;},undeleteArticle:function(btn,e){MODx.Ajax.request({url:(MODx.config.connector_url)?MODx.config.connector_url:MODx.config.connectors_url+'resource/index.php',params:{action:(MODx.config.connector_url)?'resource/undelete':'undelete',id:this.menu.record.id},listeners:{'success':{fn:this.refresh,scope:this}}});},publishSelected:function(btn,e){var cs=this.getSelectedAsList();if(cs===false)return false;MODx.Ajax.request({url:this.config.url,params:{action:'article/publishMultiple',ids:cs},listeners:{'success':{fn:function(r){this.getSelectionModel().clearSelections(true);this.refresh();},scope:this}}});return true;},unpublishSelected:function(btn,e){var cs=this.getSelectedAsList();if(cs===false)return false;MODx.Ajax.request({url:this.config.url,params:{action:'article/unpublishMultiple',ids:cs},listeners:{'success':{fn:function(r){this.getSelectionModel().clearSelections(true);this.refresh();},scope:this}}});return true;},publishArticle:function(btn,e){MODx.Ajax.request({url:(MODx.config.connector_url)?MODx.config.connector_url:MODx.config.connectors_url+'resource/index.php',params:{action:(MODx.config.connector_url)?'resource/publish':'publish',id:this.menu.record.id},listeners:{'success':{fn:this.refresh,scope:this}}});},unpublishArticle:function(btn,e){MODx.Ajax.request({url:(MODx.config.connector_url)?MODx.config.connector_url:MODx.config.connectors_url+'resource/index.php',params:{action:(MODx.config.connector_url)?'resource/unpublish':'unpublish',id:this.menu.record.id},listeners:{'success':{fn:this.refresh,scope:this}}});},handleButtons:function(e){var t=e.getTarget();var elm=t.className.split(' ')[0];if(elm=='controlBtn'){var action=t.className.split(' ')[1];var record=this.getSelectionModel().getSelected();this.menu.record=record;switch(action){case'delete':this.deleteArticle();break;case'undelete':this.undeleteArticle();break;case'edit':this.editArticle();break;case'publish':this.publishArticle();break;case'unpublish':this.unpublishArticle();break;case'view':this.viewArticle();break;default:window.location=record.data.edit_action;break;}}}});Ext.reg('articles-grid-container-articles',Articles.grid.ContainerArticles);